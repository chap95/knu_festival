<% comments.each do |comment| %>  
  <div class="comments-show">
    <div class="comment">
      <div class="row" style="padding-left: 40px;">
        <% if user_signed_in? %>
          <div class="badge badge-pill badge-light"><%= time_ago_in_words(comment.created_at) %>전 [ <%= comment.created_at.in_time_zone("Asia/Seoul").strftime('%Y-%m-%d %H:%M') %> ]</div>
        <% else %>
          <div class="badge badge-pill badge-light"><%= time_ago_in_words(comment.created_at) %>전 [ <%= comment.created_at.in_time_zone("Asia/Seoul").strftime('%Y-%m-%d %H:%M') %> ]</div>
        <% end %>
        
        <% if user_signed_in? %>
          <div class="offset-4 comment-nav" align="right">
            <a onclick="showHide('comment_<%= comment.id %>')" onfocus="this.blur()">답댓글</a>
          </div>
          <div><%= link_to "지우기", comment_path(comment), method: :delete, remote: false, data: { confirm: "정말로 지우시겠습니까?" }, style: "color: red; font-weight: bold" %></div>
        <% else %>
          <div class="offset-6 comment-nav" align="right">
            <a onclick="showHide('comment_<%= comment.id %>')" onfocus="this.blur()">답댓글 <i class="fas fa-level-down-alt"></i></a>
          </div>
        <% end %>
      </div>
      <%= content_tag(:div, comment.body, style: "white-space: pre-wrap; padding-left: 40px; margin-bottom: 20px;") %>
      
      <div id="comment_<%= comment.id %>" style="display:none;">
        <div class="reply-form">
          <%= form_for @new_comment do |f| %>
            <%= f.hidden_field :commentable_id, value: @new_comment.commentable_id %>
            <%= f.hidden_field :commentable_type, value: @new_comment.commentable_type %>
            <%= f.hidden_field :comment_id, value: comment.id %>
            <div class="field form-group">
              <%= f.text_area :body, class: 'form-control' %>
            </div>
            <div class="field form-group" style="margin-bottom: 60px;">
              <%= submit_tag "답댓글 작성", style: "float: right;", class: "btn btn-info" %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
    <div style="margin-left: 60px;">
      <%= render partial: "comments/reply_end", locals: {comments: comment.children} %>
    </div>
  </div>
  <hr/>
<% end %>